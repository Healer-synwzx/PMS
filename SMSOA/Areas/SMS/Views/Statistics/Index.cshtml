
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_SMS_Layout.cshtml";
}

@section SectionJS{
    <script type="text/javascript">
        var myColumns = [[
                { field: 'ContentID', title: 'ID', width: 100 },
                { field: 'MissionName', title: '短信任务', width: 120 },
                { field: 'Content', title: '发送内容', width: 300 },
                { field: 'SendDateTime', title: '发送时间', width: 250 },
                { field: 'TotalOfReceiveNum', title: '发送总人数', width: 100 },
                { field: 'NotReceiveNum', title: '未收到人数', width: 100 }
        ]]

        function loadDataGrid_Statistic() {
            $("#statisticlast10_datagrid").datagrid({
                width: 'auto',
                height: 'auto',
                fitColumns: true,
                striped: true,
                singleSelect: true,
                url: '@ViewBag.GetStatisticLast10',
                autoRowHeight: true,
                nowrap:false,//自动换行
                loadMsg: '数据加载中请稍后……',
                pagination: true,//启用分页，默认每页10行
                rownumbers: true,//显示页码，默认 提供 10 - 50 的页容量选择下拉框
                pageSize: 10,   //设置 页容量为 5
                pageList: [5, 10, 20],//设置 页容量下拉框
                columns: myColumns
                
            });
        }

        function load_highcharts(){
            $('#container').highcharts({
                chart: {
                    type: 'column'
                },
                title: {
                    text: '该用户近十条短信'
                },
                xAxis: {
                    categories: ['001', '002', '003']
                },
                yAxis: {
                    title: {
                        text: 'something'
                    }
                },
                series: [{
                    name: '共发送',
                    data: [10, 12, 15]
                }, {
                    name: '未收到',
                    data: [2, 1, 7]
                }]
            });
        }

            $(function () {
                loadDataGrid_Statistic();
                load_highcharts();
            })
    </script>

    }
<div class="easyui-panel" style="height:720px;padding:5px;border:0px">
    <div id="p1" class="easyui-panel" title="当前用发送短信统计" style="width:800px;height:350px;padding:3px;"
         data-options="iconCls:'icon-save',collapsible:true,minimizable:true,maximizable:true,closable:true">
        <div class="easyui-datagrid" id="statisticlast10_datagrid"></div>
    </div>
    <div id="p2" class="easyui-panel" title="当前用户发送短信趋势图" style="width:800px;height:350px;padding:3px;"
         data-options="iconCls:'icon-save',collapsible:true,minimizable:true,maximizable:true,closable:true">
       
        <div id="container" style="height: 300px;max-width:500px"></div>

    </div>
</div>
