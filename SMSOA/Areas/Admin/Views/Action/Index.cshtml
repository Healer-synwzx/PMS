
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>GetActionInfo</title>
    <link href="~/Scripts/EasyUI/themes/icon.css" rel="stylesheet" />
    <link href="~/Scripts/EasyUI/themes/black/easyui.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/EasyUI/jquery.easyui.min.js"></script>
    <script src="~/Scripts/EasyUI/locale/easyui-lang-zh_CN.js"></script>
    <script src="~/Scripts/MyScripts/jquery.msgProcess.js"></script>
    <script type="text/javascript">

        var toolbar= [ {
            iconCls: 'icon-add',
            text: "新增",
            handler: addRow
        }, '-', {
            iconCls: 'icon-remove',
            text: "删除",
            handler: removeRow
        }, '-',{
            iconCls: 'icon-edit',
            text: "编辑",
            handler: editRow
        }, '-', {
            iconCls: 'icon-search',
            text: "分配权限",
            handler: provideAction
        }]

        //提交
        function submitForm() {
            //$("#editWindow").submit()
        }

        var options = {
            url: 'xxxx.action',
            type: 'post',
            data: null,
            success: function (data) {
                if (data.statusCode == "OK") {


                } else {

                }
            }
        };

        function submitForm() {
            $.ajax({
                type: "post",
                url: "/Admin/Action/Create",      // 这里是提交到什么地方的url
                data: $("#ff").serialize(), // 这里把表单里面的数据提交（！！！注意需要将表单序列化！！！）
                dataType: "json",
                success: function (res) {
                    // 调用回调函数
                    show("res");
                }
            });
        }

        function show(data) {
            $.messager.show({
                title: 'data',
                msg: 'Message will be closed after 4 seconds.',
                showType: 'show'
            });
        }


        function addRow() {
            //$("#ff").window({
            //    buttons: [{
            //        text: '确定',
            //        iconCls: 'icon-ok',
            //        handler: function () {
            //            //$("#editForm").submit();//提交表单
            //            $.ajax({
            //                type:"post",
            //                url:"/Admin/Action/Create",      // 这里是提交到什么地方的url
            //                data: $("#editForm"),            // 这里把表单里面的数据放在这里传到后台
            //                dataType:"json",
            //                success: function (res) {
            //                    // 调用回调函数
            //                }
            //            })
            //        }
            //    }, {
            //        text: '取消',
            //        handler: function () {
            //            $('#setActionRoleDiv').dialog('close');
            //        }
            //    }]
            //})
            //打开编辑窗体
            $("#editWindow").window('open');
            //从指定页面中预读取数据


        }

        function removeRow() {

        }

        function editRow() {

        }

        function provideAction() {

        }

        $(function () {
            $("#editWindow").window('close');
            $("#datagrid").datagrid({
                width: 'auto',
                height: 'auto',
                fitColumns: true,
                striped: true,
                singleSelect: true,
                url: '/Admin/Action/GetActionInfo',
                loadMsg: '数据加载中请稍后……',
                pagination: true,//启用分页，默认每页10行
                rownumbers: true,//显示页码，默认 提供 10 - 50 的页容量选择下拉框
                pageSize: 10,   //设置 页容量为 5
                pageList: [5, 10, 20],//设置 页容量下拉框
                columns: [[
                    { field: 'ID', title: 'ID', width: 100 },
                    { field: 'ActionInfoName', title: '权限名称', width: 150 },
                    { field: 'SubTime', title: '创建时间', width: 250 },
                    { field: 'AreaName', title: '区域名', width: 120 },
                    { field: 'ControllerName', title: '控制器名', width: 120 },
                    { field: 'ActionMethodName', title: '方法名', width: 200 },
                    { field: 'Remark', title: '备注', width: 200 },
                    { field: 'Sort', title: '排序', width: 100 }
                ]],
                toolbar: toolbar
            });

        })
    </script>
</head>
<body>
    <div>
        <table class="easyui-datagrid" id="datagrid"></table>
        <div class="easyui-window" title="New Topic" id="editWindow"style="width:400px" data-options="shadow:true,modal:true">
            <div >
                <form id="ff" method="post" style="padding:10px 60px 20px 60px">
                    <table cellpadding="5">
                        <tr>
                            <td>权限名称:</td>
                            <td><input class="easyui-textbox" type="text" name="ActionInfoName" data-options="required:true"></input></td>
                        </tr>
                        <tr>
                            <td>上级菜单:</td>
                            <td>
                                <select class="easyui-combobox" style="width:100px" name="ParentID" data-options="url:'/Admin/Action/GetOption'" >
                                   
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>区域名称:</td>
                            <td><input class="easyui-textbox" type="text" name="AreaName" data-options="required:true"></input></td>
                        </tr>
                        <tr>
                            <td>控制器名称:</td>
                            <td><input class="easyui-textbox" type="text" name="ControllerName" data-options="required:true"></input></td>
                        </tr>
                        <tr>
                            <td>方法名称（权限）:</td>
                            <td><input class="easyui-textbox" type="text" name="ActionMethodName" data-options="required:true"></input></td>
                        </tr>
                        <tr>
                            <td>顺序:</td>
                            <td><input class="easyui-textbox" type="text" name="Sort"></input></td>
                        </tr>
                        <tr>
                            <td>请求类型:</td>
                            <td>
                                <select class="easyui-combobox" name="ActionTypeEnum">
                                <option value="0">POST</option>
                                <option value="1">GET</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                    </table>
                    </form>
                <div style="text-align:center;padding:5px">
                    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="submitForm()">提交</a>
                    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="clearForm()">取消</a>
                </div>

            </div>
           </div>
        </div>
</body>
</html>
