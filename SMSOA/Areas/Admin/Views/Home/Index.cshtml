
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link href="~/Scripts/EasyUI/themes/icon.css" rel="stylesheet" />
    <link href="~/Scripts/EasyUI/themes/black/easyui.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/EasyUI/jquery.easyui.min.js"></script>
    <script src="~/Scripts/EasyUI/locale/easyui-lang-zh_CN.js"></script>
    <script src="~/Scripts/MyScripts/jquery.msgProcess.js"></script>
    <script type="text/javascript">
        $(function () {
            //$(".test")
            $('#easyui_tree').tree({
                url: '/Admin/Home/GetMenuItem',
                onLoadSuccess: function (node, data) {
                    //调用方法 统一处理 Ajax获取的 json数据！
                    //$.procAjaxData(data);
                },
                onClick: function (node) {
                    createTabs(node);
                },
                animate:true
            });
        })

        function createTabs(treeNode) {
            var $tabs = $("#tabs"); //获取tabs的容器
            //判断是否已经存在同名的tab
            if ($tabs.tabs("exists", treeNode.text)) {

                var currentTab = $tabs.tabs('getSelected');//取得当前选中的选项卡
                //获取本选项卡的标题
                var currentTabTitle = currentTab.panel('options').title;
                //判断当前的标题与 被点击的节点的标题是否相等，成立则刷新
                if (currentTabTitle == treeNode.text) {
                    $tabs.tabs('update', {
                        tab: currentTab,
                        fit : true,
                        options: {

                            content: createNewIframe(treeNode.attributes.url)
                        }
                    });

                }
                //若不相等则选中 对应的tab
                $tabs.tabs("select", treeNode.text);
            }
                //若当前的tabs中不含有指定tab则创建该tab，并连接到指定页面
            else {
                $tabs.tabs('add', {
                    title: treeNode.text,
                    selected: true,
                    closable: true,
                    //style:{overflow: hidden},
                    fit: true,
                    content: createNewIframe(treeNode.attributes.url),
                    style: { overflow: "hidden" }//?
                });
            }

        }
        //style="margin:10px"
        //创建一个指定url的iframe
        function createNewIframe(url) {
            //<iframe scrolling="no" frameborder="0" id="iframeContactDiv" style="width:100%;overflow: hidden;"></iframe>
            var iframeStr = "<iframe scrolling='no' frameborder='0'  src='" + url + "' style='width:100%;height:99%;frameborder:0px solid #000;scrolling=no;overflow: hidden'></iframe>";
            return iframeStr;
        }
    </script>
    @*@Scripts.Render("~/mvcAjax");
        @Scripts.Render("~/easyUIJS");
        @Scripts.Render("~/easyUICSS");*@
</head>
<body class="easyui-layout">
    <div data-options="region:'north',border:false" style="height:60px; padding:10px">north region</div>
    <div data-options="region:'west',split:true,title:'操作列表'" style="width:200px; padding:0px;">
        <div class="easyui-panel" style="padding:0px;border:0px;overflow-x:hidden">
            <div class="easyui-accordion" style="width:100%;padding:0px">
                <div title="系统管理" data-options="iconCls:'icon-search'" style="padding:10px;">
                    <ul id="easyui_tree"></ul>
                </div>
                <div title="统计" data-options="iconCls:'icon-ok'" style="overflow:auto;padding:10px;">
                    <h3 style="color:#0099FF;">Accordion for jQuery</h3>
                    <p>统计统计统计</p>
                </div>
                <div title="帮助" data-options="iconCls:'icon-help'" style="padding:10px;">
                    <p>帮助帮助帮助</p>
                </div>

            </div>


        </div>


    </div>
    <div data-options="region:'east',split:true,collapsed:true,title:'East'" style="width:100px;padding:10px;">


    </div>
    <div data-options="region:'south',border:false" style="height:50px;padding:10px;">south region</div>
    <div data-options="region:'center',title:'Center'" style="overflow-x:hidden;overflow-y:hidden">
       
        <div id="tabs" class="easyui-tabs" style="width:100%;height:100%;overflow-x:hidden;overflow-y:hidden">

        </div>

    </div>
</body>
</html>
